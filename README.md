# Endpoint.js

## Installation
```sh
 npm install repoint
```

## Basic Usage
```js
import Repoint from 'repoint'

const repoint = new Repoint({ host: 'http://api.example.com/v1/' })

const usersAPI = repoint.generate('users')

// makes GET request to /users
usersAPI.getCollection({})

// makes GET request to /users?some=1
usersAPI.getCollection({ some: 1 })

// makes GET request to /users/1
usersAPI.get({ id: 1 })

// makes POST request to /users with body { email: 'email@example.com' } and ContentType: application/json
usersAPI.create({ email: 'email@example.com' })

// makes PUT request to /users/1 with body { email: 'email@example.com' } and ContentType: application/json
usersAPI.update({ id: 1, user: { email: 'updated-email@example.com' }})

// makes DELETE request to /users/1
usersAPI.destroy({ id: 1 })
```

You can change idAttribute key for member URLs (get, update, destroy) by providing `idAttribute` option, the default value is 'id'

```js
import Repoint from 'repoint'
const repoint = new Repoint({ host: 'http://api.example.com/v1/' })

const usersAPI = repoint.generate('users', { idAttribute: 'slug' })

// makes GET request to /users/tom
usersAPI.get({ slug: 'tom' })
```

You can provide namespace as well:
```js
import Repoint from 'repoint'

const repoint = new Repoint({ host: 'http://api.example.com/v1/' })
const usersAPI = repoint.generate('users', { idAttribute: 'slug', namespace: 'admin' })

// makes GET request to /admin/users/tom
usersAPI.get({ slug: 'tom' })
```

## Nesting endpoints

To make requests to the nested route you use nestUnder option, which expects another endpoint:
```js
import Repoint from 'repoint'

const repoint = new Repoint({ host: 'http://api.example.com/v1/' })
const postsAPI = repoint.generate('posts', { nestUnder: endpoints('users') })

// makes GET request to /users/1/posts
// userId is generated by the following pattern:
// singularized endpoint name + capitalized idAttribute
// in this case, it is "user" + "Id"
postsAPI.getCollection({ userId: 1 })

// makes GET request to /users/1/posts/1
postsAPI.get({ userId: 1, id: 1 })
```

There is no limit for nesting level. `idAttribute` and `namespace` options also work for nested endpoints
